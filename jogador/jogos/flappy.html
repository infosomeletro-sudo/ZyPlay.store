<!DOCTYPE html><html lang="pt-br"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ZYPLAY â€¢ Flappy</title>
<style>
  body{margin:0;background:#050510;color:#fff;font-family:Arial;text-align:center}
  header{display:flex;gap:10px;justify-content:center;align-items:center;padding:14px;background:#12122b;border-bottom:3px solid #ff007a}
  a.btn,button.btn{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.25);color:#fff;cursor:pointer;text-decoration:none;font-weight:700}
  canvas{display:block;margin:14px auto;background:#0f1f3a;border:2px solid rgba(0,212,255,.5);border-radius:12px}
</style></head><body>
<header>
  <a class="btn" href="/">â¬… Voltar ao menu</a>
  <button class="btn" id="soundBtn">ðŸ”Š Som: ON</button>
</header>
<div>Tecla espaÃ§o / clique para voar â€¢ Pontos: <b id="s">0</b></div>
<canvas id="c" width="420" height="420"></canvas>

<script>
let audioCtx=null, soundOn=true;
const soundBtn=document.getElementById('soundBtn');
function initAudio(){ if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }
function beep(f=440,d=0.08,t="square",v=0.06){
  if(!soundOn) return; initAudio();
  const o=audioCtx.createOscillator(), g=audioCtx.createGain();
  o.type=t; o.frequency.value=f; g.gain.value=v;
  o.connect(g); g.connect(audioCtx.destination);
  o.start(); o.stop(audioCtx.currentTime+d);
}
soundBtn.onclick=()=>{ soundOn=!soundOn; beep(700,0.05); soundBtn.textContent=soundOn?"ðŸ”Š Som: ON":"ðŸ”‡ Som: OFF"; };
document.addEventListener("click", initAudio, {once:true});
document.addEventListener("keydown", initAudio, {once:true});

const canvas=document.getElementById('c'), ctx=canvas.getContext('2d');
let bird, pipes, score, alive;

function reset(){
  bird={x:90,y:200,vy:0};
  pipes=[{x:420, gapY:160}];
  score=0; alive=true;
  document.getElementById('s').textContent=score;
}
function flap(){ if(!alive) return; bird.vy=-6.5; beep(900,0.05,"square",0.06); }
document.addEventListener('keydown',e=>{ if(e.code==="Space") flap(); });
document.addEventListener('click',flap);

function step(){
  ctx.clearRect(0,0,420,420);
  // bird physics
  bird.vy+=0.35; bird.y+=bird.vy;

  // pipes
  for(const p of pipes){ p.x-=2.2; }
  if(pipes[pipes.length-1].x<240){
    pipes.push({x:420, gapY: 90+Math.random()*220});
  }
  if(pipes[0].x<-60) pipes.shift();

  // draw pipes
  ctx.fillStyle="#00d4ff";
  for(const p of pipes){
    const gap=120;
    const topH=p.gapY-gap/2;
    const botY=p.gapY+gap/2;
    ctx.fillRect(p.x,0,52,topH);
    ctx.fillRect(p.x,botY,52,420-botY);
  }

  // bird
  ctx.fillStyle="#ffcc00";
  ctx.fillRect(bird.x, bird.y, 22, 22);

  // score + collision
  for(const p of pipes){
    if(!p.passed && p.x+52<bird.x){
      p.passed=true; score++; document.getElementById('s').textContent=score;
      beep(1200,0.04,"square",0.05);
    }
    const gap=120;
    const topH=p.gapY-gap/2;
    const botY=p.gapY+gap/2;
    const hit = bird.x< p.x+52 && bird.x+22>p.x &&
      (bird.y < topH || bird.y+22 > botY);
    if(hit) die();
  }
  if(bird.y<0 || bird.y>398) die();

  requestAnimationFrame(step);
}

function die(){
  if(!alive) return;
  alive=false;
  beep(180,0.12,"sawtooth",0.08); setTimeout(()=>beep(120,0.18,"sawtooth",0.08),80);
  setTimeout(()=>{ alert("Game Over! Pontos: "+score); reset(); alive=true; }, 80);
}

reset(); step();
</script>
</body></html>
