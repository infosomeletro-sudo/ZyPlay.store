<!DOCTYPE html><html lang="pt-br"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ZYPLAY â€¢ Pong Neon</title>
<style>
  :root{--bg:#050510;--pink:#ff007a;--blue:#00d4ff;--gold:#ffcc00;}
  body{margin:0;background:radial-gradient(1200px 600px at 50% -10%, rgba(0,212,255,.18), transparent 60%),
                 radial-gradient(900px 600px at 100% 20%, rgba(255,0,122,.16), transparent 60%),
                 #050510;color:#fff;font-family:system-ui,Arial;text-align:center}
  header{display:flex;gap:10px;justify-content:center;align-items:center;padding:14px;background:rgba(18,18,43,.85);
         border-bottom:3px solid var(--pink);backdrop-filter:blur(10px)}
  a.btn,button.btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.25);
                   color:#fff;cursor:pointer;text-decoration:none;font-weight:800}
  a.btn:hover,button.btn:hover{border-color:rgba(0,212,255,.6)}
  #hud{max-width:780px;margin:10px auto;display:flex;justify-content:space-between;gap:10px;padding:0 10px;font-weight:800}
  .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border:1px solid rgba(255,255,255,.12);border-radius:999px;
        background:rgba(0,0,0,.2)}
  canvas{display:block;margin:12px auto;border-radius:16px;border:2px solid rgba(0,212,255,.45);
         box-shadow:0 0 40px rgba(0,212,255,.12),0 0 50px rgba(255,0,122,.08)}
  .tip{opacity:.8;font-size:13px}
</style></head><body>
<header>
  <a class="btn" href="/">â¬… Voltar ao menu</a>
  <button class="btn" id="soundBtn">ðŸ”Š Som: ON</button>
  <button class="btn" id="resetBtn">â†» Reiniciar</button>
</header>

<div id="hud">
  <div class="pill">VocÃª: <span id="p1">0</span> â€¢ IA: <span id="p2">0</span></div>
  <div class="pill">Combo: <span id="combo">0</span> â€¢ Velocidade: <span id="spd">1.0</span>x</div>
</div>
<div class="tip">Mover: <b>W/S</b> ou <b>â†‘/â†“</b> â€¢ ComeÃ§a automaticamente</div>
<canvas id="c" width="780" height="420"></canvas>

<script>
/* ===== SOM (WebAudio) ===== */
let audioCtx=null, soundOn=true;
const soundBtn=document.getElementById('soundBtn');
function initAudio(){ if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }
function tone(f=440,d=0.06,type="square",vol=0.05){
  if(!soundOn) return; initAudio();
  const o=audioCtx.createOscillator(), g=audioCtx.createGain();
  o.type=type; o.frequency.value=f; g.gain.value=vol;
  o.connect(g); g.connect(audioCtx.destination);
  o.start(); o.stop(audioCtx.currentTime+d);
}
soundBtn.onclick=()=>{ soundOn=!soundOn; tone(700,0.05); soundBtn.textContent=soundOn?"ðŸ”Š Som: ON":"ðŸ”‡ Som: OFF"; };
document.addEventListener("click", initAudio, {once:true});
document.addEventListener("keydown", initAudio, {once:true});

/* ===== JOGO ===== */
const canvas=document.getElementById('c'), ctx=canvas.getContext('2d');
const W=canvas.width,H=canvas.height;
let keys={};

const pA={x:40,y:H/2,w:14,h:86,vy:0};
const pB={x:W-54,y:H/2,w:14,h:86,vy:0};
let ball, scoreA=0, scoreB=0, combo=0, speedMult=1;
let particles=[];

function resetBall(dir=1){
  ball={x:W/2,y:H/2,r:8,vx:dir*(5+Math.random()*1.8)*speedMult,vy:(Math.random()*4-2)*speedMult,spin:0};
  combo=0; updateHUD();
  tone(520,0.03,"square",0.03);
}
function updateHUD(){
  document.getElementById('p1').textContent=scoreA;
  document.getElementById('p2').textContent=scoreB;
  document.getElementById('combo').textContent=combo;
  document.getElementById('spd').textContent=speedMult.toFixed(1);
}
function splash(x,y,n=18,color="rgba(0,212,255,.9)"){
  for(let i=0;i<n;i++){
    particles.push({x,y,vx:(Math.random()*6-3),vy:(Math.random()*6-3),life:35+Math.random()*20,color});
  }
}
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}

document.addEventListener('keydown',e=>keys[e.code]=true);
document.addEventListener('keyup',e=>keys[e.code]=false);
document.getElementById('resetBtn').onclick=()=>{ scoreA=scoreB=0; speedMult=1; resetBall(Math.random()<.5?1:-1); };

resetBall();

function step(){
  // input
  const up = keys["ArrowUp"]||keys["KeyW"];
  const dn = keys["ArrowDown"]||keys["KeyS"];
  pA.y += (dn?7:0) - (up?7:0);
  pA.y = clamp(pA.y, pA.h/2+14, H - pA.h/2-14);

  // IA com "erro humano"
  const target = ball.y + (ball.vx>0 ? (ball.vy*10) : 0);
  const aiSpeed = 5.4 + Math.min(3, speedMult);
  pB.y += clamp(target - pB.y, -aiSpeed, aiSpeed) + (Math.random()-.5)*0.9;
  pB.y = clamp(pB.y, pB.h/2+14, H - pB.h/2-14);

  // fÃ­sica bola
  ball.x += ball.vx; ball.y += ball.vy;

  // paredes
  if(ball.y-ball.r<14){ ball.y=14+ball.r; ball.vy*=-1; tone(720,0.03); splash(ball.x, ball.y, 10, "rgba(255,204,0,.9)");}
  if(ball.y+ball.r>H-14){ ball.y=H-14-ball.r; ball.vy*=-1; tone(720,0.03); splash(ball.x, ball.y, 10, "rgba(255,204,0,.9)");}

  // colisÃ£o paddle
  function hitP(p){
    const left = p.x - p.w/2, right = p.x + p.w/2;
    const top = p.y - p.h/2, bottom = p.y + p.h/2;
    return ball.x+ball.r>left && ball.x-ball.r<right && ball.y+ball.r>top && ball.y-ball.r<bottom;
  }
  if(ball.vx<0 && hitP({x:pA.x,y:pA.y,w:pA.w,h:pA.h})){
    ball.x = pA.x + pA.w/2 + ball.r;
    const rel = (ball.y - pA.y) / (pA.h/2);
    ball.vx *= -1.05; ball.vy += rel*2.2;
    combo++; if(combo%4===0){ speedMult = Math.min(2.5, speedMult+0.1); }
    tone(980,0.04); tone(1280,0.03);
    splash(ball.x, ball.y, 16, "rgba(0,212,255,.9)");
    updateHUD();
  }
  if(ball.vx>0 && hitP({x:pB.x,y:pB.y,w:pB.w,h:pB.h})){
    ball.x = pB.x - pB.w/2 - ball.r;
    const rel = (ball.y - pB.y) / (pB.h/2);
    ball.vx *= -1.05; ball.vy += rel*2.2;
    combo++; if(combo%4===0){ speedMult = Math.min(2.5, speedMult+0.1); }
    tone(980,0.04); tone(1280,0.03);
    splash(ball.x, ball.y, 16, "rgba(255,0,122,.9)");
    updateHUD();
  }

  // ponto
  if(ball.x < -30){
    scoreB++; tone(180,0.12,"sawtooth",0.08); splash(W/2,H/2,30,"rgba(255,0,122,.9)");
    resetBall(1); updateHUD();
  }
  if(ball.x > W+30){
    scoreA++; tone(180,0.12,"sawtooth",0.08); splash(W/2,H/2,30,"rgba(0,212,255,.9)");
    resetBall(-1); updateHUD();
  }

  // render
  ctx.clearRect(0,0,W,H);
  // fundo com grid neon
  ctx.globalAlpha=1;
  ctx.fillStyle="rgba(0,0,0,.2)"; ctx.fillRect(0,0,W,H);
  ctx.strokeStyle="rgba(255,0,122,.12)"; ctx.lineWidth=1;
  for(let x=0;x<W;x+=36){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,H); ctx.stroke(); }
  ctx.strokeStyle="rgba(0,212,255,.10)";
  for(let y=0;y<H;y+=36){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(W,y); ctx.stroke(); }

  // centro
  ctx.strokeStyle="rgba(255,255,255,.18)";
  ctx.setLineDash([10,10]); ctx.beginPath(); ctx.moveTo(W/2,10); ctx.lineTo(W/2,H-10); ctx.stroke(); ctx.setLineDash([]);

  // partÃ­culas
  for(let i=particles.length-1;i>=0;i--){
    const p=particles[i];
    p.x+=p.vx; p.y+=p.vy; p.vx*=0.98; p.vy*=0.98; p.life-=1;
    ctx.globalAlpha=Math.max(0,p.life/55);
    ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,3,3);
    if(p.life<=0) particles.splice(i,1);
  }
  ctx.globalAlpha=1;

  // paddles
  function drawP(p,color){
    ctx.fillStyle=color;
    ctx.shadowColor=color; ctx.shadowBlur=20;
    ctx.fillRect(p.x-p.w/2,p.y-p.h/2,p.w,p.h);
    ctx.shadowBlur=0;
  }
  drawP(pA,"rgba(0,212,255,.95)");
  drawP(pB,"rgba(255,0,122,.95)");

  // bola
  ctx.fillStyle="rgba(255,204,0,.95)";
  ctx.shadowColor="rgba(255,204,0,.8)"; ctx.shadowBlur=18;
  ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fill();
  ctx.shadowBlur=0;

  requestAnimationFrame(step);
}
step();
</script>
</body></html>
