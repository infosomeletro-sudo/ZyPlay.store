<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cobrinha</title>
<style>
canvas{background:#000;display:block;margin:auto}
body{text-align:center;color:#fff;background:#111}
</style>
</head>
<body>
<h2>Snake</h2>
<canvas id="c" width="400" height="400"></canvas>

<script>
const c=document.getElementById("c");
const ctx=c.getContext("2d");
let x=200,y=200,dx=20,dy=0;
let comidaX=100,comidaY=100;
let pontos=0;

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp"){dx=0;dy=-20}
  if(e.key==="ArrowDown"){dx=0;dy=20}
  if(e.key==="ArrowLeft"){dx=-20;dy=0}
  if(e.key==="ArrowRight"){dx=20;dy=0}
});

function beep(freq,dur){
  const o=new AudioContext().createOscillator();
  const g=new AudioContext().createGain();
}

let audioCtx;
function som(freq){
  if(!audioCtx) audioCtx=new AudioContext();
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  o.frequency.value=freq;
  o.connect(g);
  g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime+0.1);
}

function game(){
  ctx.clearRect(0,0,400,400);
  x+=dx;y+=dy;

  if(x===comidaX && y===comidaY){
    pontos++;
    som(800);
    comidaX=Math.floor(Math.random()*20)*20;
    comidaY=Math.floor(Math.random()*20)*20;
  }

  if(x<0||x>=400||y<0||y>=400){
    som(200);
    alert("Game Over");
    x=200;y=200;
  }

  ctx.fillStyle="lime";
  ctx.fillRect(x,y,20,20);

  ctx.fillStyle="red";
  ctx.fillRect(comidaX,comidaY,20,20);
}
setInterval(game,150);
</script>
</body>
</html>
